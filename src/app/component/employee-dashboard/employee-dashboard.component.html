<div class="dashboard-container">
  <!-- Filter Panel -->
  <div class="filter-panel">
    <div class="filter-group">
      <div class="filter-item">
        <label for="startDate">Start date:</label>
        <input type="date" id="startDate" [(ngModel)]="startDate" />
      </div>
      <div class="filter-item">
        <label for="endDate">End date:</label>
        <input type="date" id="endDate" [(ngModel)]="endDate" />
      </div>
      <div class="filter-item align-end">
        <button (click)="fetchData()">Apply</button>
      </div>
      <div class="filter-item align-end">
        <button (click)="exportCSV()">Export CSV</button>
      </div>
    </div>
  </div>

  <!-- Chart + Schedule -->
  <div class="dashboard-overview">
    <div class="overview-chart">
      <h3>Attendance Chart</h3>
      <canvas id="attendanceChart"></canvas>
    </div>
    <div class="overview-summary">
      <div class="summary-box total">
        <h3>Today's Schedule</h3>
        <p><strong>Time:</strong> {{ todaySchedule.time }}</p>
        <p><strong>Location:</strong> {{ todaySchedule.location }}</p>
      </div>
    </div>
  </div>

  <!-- Attendance Table -->
  <div class="table-container">
    <h3>Attendance for {{ today }}</h3>
    <div class="table-scroll">
      <table class="attendance-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Employee ID</th>
            <th>Punch In</th>
            <th>Punch Out</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of filteredData">
            <td data-label="Date">{{ row.date }}</td>
            <td data-label="Employee ID">{{ row.empId }}</td>
            <td data-label="Punch In">{{ row.checkIn || '-' }}</td>
            <td data-label="Punch Out">{{ row.checkOut || '-' }}</td>
            <td data-label="Status" [ngClass]="row.status.toLowerCase()">{{ row.status }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination">
      <button (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">Prev</button>
      <span>{{ currentPage }}</span>
      <button
        (click)="onPageChange(currentPage + 1)"
        [disabled]="(currentPage * pageSize) >= attendanceData.length"
      >
        Next
      </button>
    </div>
  </div>
</div>
